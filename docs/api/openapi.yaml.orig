openapi: "3.0.0"
info:
  title: "BEL Bio API Specification"
  description: |
    BEL Bio REST API specification

  contact:
    name: BELBio
    email: support@bel.bio
    url: http://bel.bio/support

  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html

  version: 0.1.0


externalDocs:
  description: "Find out more about BEL"
  url: "http://bel.bio"


servers:
- url: https://api.demo.bel.bio/v1
  description: Demo Server


security:
  apikey:
    description: |
      For accessing the API a valid JWT token must be passed in all the queries in
      the 'Authorization' header.

      A valid JWT token is generated by the API and retourned as answer of a call
      to the route /login giving a valid user & password.

      The following syntax must be used in the 'Authorization' header:
        JWT: xxxxxx.yyyyyyy.zzzzzz
    type: http
    scheme: bearer
    bearerFormat: JWT
    name: Authorization
    in: header


tags:
  - name: BEL
    description: "BEL Language endpoints"
  - name: Terminologies
    description: "Namespace and Annotation terminology endpoints"
  - name: Nanopubs
    description: "Nanopub endpoints"
  - name: Edges
    description: "Edge endpoints"


paths:

  /bel: {}

  /terms: {}

  /nanopubs:
    get:
      tags: ['Nanopubs']
      summary: Get Nanopubs
      description: Get nanopubs
      parameters:
        - $ref: "#/parameters/offsetParam"
        - $ref: "#/parameters/limitParam"
        - $ref: "#/parameters/includeParam"
        - $ref: "#/parameters/excludeParam"
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/Nanopub'

        401:
          description: Unauthorized, missing or incorrect API token
          schema:
            $ref: "#/definitions/ErrorResponse"
        default:
          description: Unexpected error
          schema:
            $ref: "#/definitions/ErrorResponse"

  /edges: {}


components: {}


parameters:

  offsetParam:
    name: offset
    in: query
    required: false
    type: integer
    minimum: 0
    description: The number of items to skip before starting to collect the result set.

  limitParam:
    name: limit
    in: query
    required: false
    type: integer
    minimum: 1
    maximum: 100
    default: 20
    description: The numbers of items to return.


  sort_fieldsParam:
    name: sort_fields
    in: query
    required: false
    type: array
    items:
      type: string
    collectionFormat: csv
    description: Results are sorted by first, second, ... sort field in order

  sort_directionParam:
    name: sort_dirction
    in: query
    required: false
    type: string
    enum: ['asc', 'desc']
    description: Ascending or descending sort
    default: 'desc'

  includeParam:
    name: include
    in: query
    required: false
    type: array
    items:
      type: string
    collectionFormat: csv
    description: >
      Include these values in response, include takes
      precedence over exclude

  excludeParam:
    name: exclude
    in: query
    required: false
    type: array
    items:
      type: string
    collectionFormat: csv
    description: >
      Exclude these values in response, include takes
      precedence over exclude

responses:
  Standard500ErrorResponse:
    description: An unexpected error occured.
    schema:
      $ref: "#/definitions/ErrorResponse"



definitions:
  Nanopub:
    description: Smallest unit of relational knowledge with context (see http://nanopub.org/)
    type: object
    additionalProperties: false
    required:
      - nanopub
    properties:
      nanopub:
        type: object
        additionalProperties: false
        required:
          - type
          - citation
          - edges
        properties:
          schema_uri:
            type: string
            format: uri
          id:
            anyOf:
              - type: string
              - type: "null"
            description: ID of nanopub
          type:
            description: 'Type of nanopub: BEL version 2.0, PEL, Legal, etc'
            type: object
            additionalProperties: false
            required:
              - name
              - version
            properties:
              name:
                type: string
                description: Name of Nanopub type, e.g. BEL
              version:
                type: string
                description: Version of Nanopub type, e.g. 2.0.0
          context:
            description: Context of the edge[s] (e.g for BEL nanopubs, the species, tissue, disease)
              state, ...
            type: array
            items:
              type: object
              properties:
                key:
                  type: string
                value:
                  anyOf:
                    - type: string
                    - type: object
                label:
                  type: string
          citation:
            description: |
              Reference to the source. The specific type of nanopub may have
              specific objects required for citations (e.g. BEL citations).
              The following properties are optional.
            type: object
            additionalProperties: true
            required:
              - citation
            properties:
              citation:
                oneOf:
                  - type: string
                    format: uri
                    description: URL of this citation, e.g. a website cited should have this field
                  - type: object
                    properties:
                      source_db:
                        type: string
                        description: name of journal, book, website
                      src_id:
                        type: string
                        description: Source ID of citation, e.g. Pubmed ID for Pubmed citations
                  - type: string
                    description: |
                      Citation as single unparsed string, e.g.
                      Edmunds W, Pebody R, et al. 2000. The sero-epidemiology of
                      diptheria in Western Europe. Epidemiol Infect 125(1):113-25.
              authors:
                type: array
                items:
                  type: string
              source_name:
                type: string
                description: name of journal, book, website
              title:
                type: string
                description: Title of citation (journal article title, web page title, book chapter title)
              date_published:
                type: string
                description: ISO Date format, e.g. 20161231 for December 31, 2016

          edges:
            description: List of edges, minimum of 1 edge required, all edges must match context
            type: array
            minItems: 1
            items:
              type: object
              properties:
                edge:
                  type: object
                  additionalProperties: false
                  required:
                    - subject
                  properties:
                    subject:
                      type: string
                    relation:
                      type: string
                    object:
                      type: string

          evidence:
            description: Any specific summary text that serves as a basis for this edge and context.
            type: string
          metadata:
            description: |
              Optional metadata elements - Creator information, creation date, additional notes, etc
              Any additional metadata elements can be added as needed.
            type: object
            additionalProperties: true
            properties:
              creation_date:
                type: string
                format: date
              modification_date:
                type: string
                format: date
              nanopub_collection:
                type: string
                description: Name of a set of nanopubs if applicable, used to group nanopubs into sets
              author_name:
                type: string
              author_email:
                type: string
                format: email
              reviewer_name:
                type: string
              reviewer_email:
                type: string
                format: email
              status:
                type: string
                description: Status of nanopub - used for workflow management e.g. draft, review, published


    example:
      nanopub:
        type:
          name: BEL
          version: '2.0.0'
        schema_uri: http://json.schemastore.org/nanopub-1.0.0.json
        edges:
          - object: bp(GOBP:"lipid oxidation")
            relation: positiveCorrelation
            subject: path(MESHD:Atherosclerosis)
        evidence: Oxidation and nitration of macromolecules, such as proteins, DNA and lipids,
          are prominentin atherosclerotic arteries.
        context:
          - key: Species
            value: TAX:9606
            label: human
          - key: Anatomy
            value: MESH:"Axillary Artery"
            label: Axillary Artery
          - key: Disease
            value: MESH:"Coronary Artery Disease"
            label: Coronary Artery Disease
          - key: TextLocation
            value: Review
        citation:
          authors:
          - de Nigris F
          - Lerman A
          - Ignarro LJ
          - Williams-Ignarro S
          - Sica V
          - Baker AH
          - Lerman LO
          - Geng YJ
          - Napoli C
          comments: ''
          date: ''
          id: '12928037'
          name: Trends in molecular medicine
          type: PubMed
        metadata:
          stmt_group: Group 1

  ErrorResponse:
    type: object
    properties:
      code:
        type: string
      message:
        type: string
    required:
      - code
      - message
host: "api.bel.bio"
basePath: /v1
schemes:
  - "http"
  - "https"
consumes:
  - "application/json"
produces:
  - "application/json"
